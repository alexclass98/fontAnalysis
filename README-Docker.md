# Docker Setup –¥–ª—è FontAnalysis

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üöÄ –î–ª—è –Ω–æ–≤—ã—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**

   ```bash
   git clone <your-repo-url>
   cd fontAnalysis
   ```

2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

   ```bash
   cp env.example .env
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç (–¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):**

   ```bash
   docker-compose up --build
   ```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   - –§—Ä–æ–Ω—Ç–µ–Ω–¥: http://localhost:3000
   - API: http://localhost:8000
   - –ê–¥–º–∏–Ω–∫–∞: http://localhost:8000/admin (admin/admin)

### üîÑ –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

1. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö —Å –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**

   ```bash
   ./export-data.sh
   ```

2. **–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –Ω–æ–≤—É—é –º–∞—à–∏–Ω—É:**

   ```bash
   ./import-data.sh
   ```

3. **–ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:**
   ```bash
   docker-compose up --build
   ```

### üõ†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

- **–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:** `./load-fixtures.sh`
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î:** `./init-db.sh`
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:** `./export-data.sh`
- **–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:** `./import-data.sh`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –°–µ—Ä–≤–∏—Å—ã:

- **db** - PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **backend** - Django API —Å–µ—Ä–≤–µ—Ä
- **frontend** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Nginx)

### –ü–æ—Ä—Ç—ã:

- 3000 - React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- 8000 - Django API
- 5432 - PostgreSQL (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker-compose up --build
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django
docker-compose exec backend python manage.py createsuperuser

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose exec backend python manage.py migrate

# –°–±–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
docker-compose exec backend python manage.py collectstatic
```

### –û—Ç–ª–∞–¥–∫–∞:

```bash
# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—ç–∫–µ–Ω–¥–∞
docker-compose exec backend bash

# –í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose exec db psql -U postgres -d fontanalysis

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs backend
docker-compose logs frontend
docker-compose logs db
```

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:

- `SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Django (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑–º–µ–Ω–∏—Ç–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!)
- `DEBUG` - —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ (1/0)
- `DATABASE_URL` - —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- `CORS_ALLOWED_ORIGINS` - —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã –¥–ª—è CORS
- `REACT_APP_API_URL` - URL API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:

1. –ò–∑–º–µ–Ω–∏—Ç–µ `DEBUG=0` –≤ `.env`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π `SECRET_KEY`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `DATABASE_URL` –¥–ª—è –≤–∞—à–µ–π –ë–î
4. –û–±–Ω–æ–≤–∏—Ç–µ `CORS_ALLOWED_ORIGINS` –∏ `CSRF_TRUSTED_ORIGINS`
5. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–π –ë–î –≤–º–µ—Å—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:

```bash
# –°–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker-compose down -v
docker-compose up --build
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:

```bash
# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫—ç—à–∞
docker-compose build --no-cache
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ—Ä—Ç–∞–º–∏:

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 3000, 8000, 5432 —Å–≤–æ–±–æ–¥–Ω—ã:

```bash
lsof -i :3000
lsof -i :8000
lsof -i :5432
```
